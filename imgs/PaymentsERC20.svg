<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: UmlClassDiagram Pages: 1 -->
<svg width="1959pt" height="1734pt"
 viewBox="0.00 0.00 1959.04 1734.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1730.2)">
<title>UmlClassDiagram</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1730.2 1955.0383,-1730.2 1955.0383,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node">
<title>0</title>
<polygon fill="#f2f2f2" stroke="#000000" points="915.0465,-1044.3 915.0465,-1202.7 1459.7649,-1202.7 1459.7649,-1044.3 915.0465,-1044.3"/>
<text text-anchor="middle" x="1187.4057" y="-1186.1" font-family="Times,serif" font-size="14.00" fill="#000000">EIP712Verifier</text>
<polyline fill="none" stroke="#000000" points="915.0465,-1177.9 1459.7649,-1177.9 "/>
<text text-anchor="start" x="923.0465" y="-1161.3" font-family="Times,serif" font-size="14.00" fill="#000000">Private:</text>
<text text-anchor="start" x="923.0465" y="-1144.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_TYPEHASH_PAYMENT: bytes32</text>
<text text-anchor="start" x="923.0465" y="-1127.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_TYPEHASH_ASSETTRANSFER: bytes32</text>
<polyline fill="none" stroke="#000000" points="915.0465,-1119.5 1459.7649,-1119.5 "/>
<text text-anchor="start" x="923.0465" y="-1102.9" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="923.0465" y="-1086.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor()</text>
<text text-anchor="start" x="923.0465" y="-1069.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;verifyPayment(inp: PaymentInput, signature: bytes, signer: address): bool</text>
<text text-anchor="start" x="923.0465" y="-1052.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;verifyAssetTransferResult(inp: AssetTransferResult, signature: bytes, signer: address): bool</text>
</g>
<!-- 2 -->
<g id="node3" class="node">
<title>2</title>
<polygon fill="#f2f2f2" stroke="#000000" points="122.6913,-1533.7 122.6913,-1658.5 684.1201,-1658.5 684.1201,-1533.7 122.6913,-1533.7"/>
<text text-anchor="middle" x="403.4057" y="-1641.9" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;Interface&gt;&gt;</text>
<text text-anchor="middle" x="403.4057" y="-1625.1" font-family="Times,serif" font-size="14.00" fill="#000000">IEIP712Verifier</text>
<polyline fill="none" stroke="#000000" points="122.6913,-1616.9 684.1201,-1616.9 "/>
<text text-anchor="middle" x="403.4057" y="-1600.3" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
<polyline fill="none" stroke="#000000" points="122.6913,-1592.1 684.1201,-1592.1 "/>
<text text-anchor="start" x="130.6913" y="-1575.5" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="130.6913" y="-1558.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;verifyPayment(inp: PaymentInput, signature: bytes, signer: address): bool</text>
<text text-anchor="start" x="130.6913" y="-1541.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;verifyAssetTransferResult(result: AssetTransferResult, signature: bytes, signer: address): bool</text>
</g>
<!-- 0&#45;&gt;2 -->
<g id="edge5" class="edge">
<title>0&#45;&gt;2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1132.8423,-1202.9658C1081.6871,-1271.9505 999.3155,-1369.9405 906.4057,-1430 845.483,-1469.3821 774.3473,-1500.2649 705.0767,-1524.147"/>
<polygon fill="none" stroke="#000000" points="701.736,-1514.1925 676.5827,-1533.6235 708.3633,-1534.1193 701.736,-1514.1925"/>
</g>
<!-- 1 -->
<g id="node2" class="node">
<title>1</title>
<polygon fill="#f2f2f2" stroke="#000000" points="1477.7731,-993.9 1477.7731,-1253.1 1951.0383,-1253.1 1951.0383,-993.9 1477.7731,-993.9"/>
<text text-anchor="middle" x="1714.4057" y="-1236.5" font-family="Times,serif" font-size="14.00" fill="#000000">FeesCollectors</text>
<polyline fill="none" stroke="#000000" points="1477.7731,-1228.3 1951.0383,-1228.3 "/>
<text text-anchor="start" x="1485.7731" y="-1211.7" font-family="Times,serif" font-size="14.00" fill="#000000">Private:</text>
<text text-anchor="start" x="1485.7731" y="-1194.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_defaultFeesCollector: address</text>
<text text-anchor="start" x="1485.7731" y="-1178.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_universeFeesCollectors: mapping(uint256=&gt;address)</text>
<polyline fill="none" stroke="#000000" points="1477.7731,-1169.9 1951.0383,-1169.9 "/>
<text text-anchor="start" x="1485.7731" y="-1153.3" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="1485.7731" y="-1136.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setDefaultFeesCollector(feesCollector: address)</text>
<text text-anchor="start" x="1485.7731" y="-1119.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setUniverseFeesCollector(universeId: uint256, feesCollector: address)</text>
<text text-anchor="start" x="1485.7731" y="-1102.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;removeUniverseFeesCollector(universeId: uint256)</text>
<text text-anchor="start" x="1485.7731" y="-1086.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;defaultFeesCollector(): address</text>
<text text-anchor="start" x="1485.7731" y="-1069.3" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="1485.7731" y="-1052.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; DefaultFeesCollector(feesCollector: address)</text>
<text text-anchor="start" x="1485.7731" y="-1035.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; UniverseFeesCollector(universeId: uint256, feesCollector: address)</text>
<text text-anchor="start" x="1485.7731" y="-1018.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor()</text>
<text text-anchor="start" x="1485.7731" y="-1002.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;universeFeesCollector(universeId: uint256): address</text>
</g>
<!-- 4 -->
<g id="node9" class="node">
<title>4</title>
<polygon fill="#f2f2f2" stroke="#000000" points="1505.7724,-1466.5 1505.7724,-1725.7 1923.039,-1725.7 1923.039,-1466.5 1505.7724,-1466.5"/>
<text text-anchor="middle" x="1714.4057" y="-1709.1" font-family="Times,serif" font-size="14.00" fill="#000000">Operators</text>
<polyline fill="none" stroke="#000000" points="1505.7724,-1700.9 1923.039,-1700.9 "/>
<text text-anchor="start" x="1513.7724" y="-1684.3" font-family="Times,serif" font-size="14.00" fill="#000000">Private:</text>
<text text-anchor="start" x="1513.7724" y="-1667.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_defaultOperator: address</text>
<text text-anchor="start" x="1513.7724" y="-1650.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_universeOperators: mapping(uint256=&gt;address)</text>
<polyline fill="none" stroke="#000000" points="1505.7724,-1642.5 1923.039,-1642.5 "/>
<text text-anchor="start" x="1513.7724" y="-1625.9" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="1513.7724" y="-1609.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setDefaultOperator(operator: address)</text>
<text text-anchor="start" x="1513.7724" y="-1592.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setUniverseOperator(universeId: uint256, operator: address)</text>
<text text-anchor="start" x="1513.7724" y="-1575.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;removeUniverseOperator(universeId: uint256)</text>
<text text-anchor="start" x="1513.7724" y="-1558.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;defaultOperator(): address</text>
<text text-anchor="start" x="1513.7724" y="-1541.9" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="1513.7724" y="-1525.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; DefaultOperator(operator: address)</text>
<text text-anchor="start" x="1513.7724" y="-1508.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; UniverseOperator(universeId: uint256, operator: address)</text>
<text text-anchor="start" x="1513.7724" y="-1491.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor()</text>
<text text-anchor="start" x="1513.7724" y="-1474.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;universeOperator(universeId: uint256): address</text>
</g>
<!-- 1&#45;&gt;4 -->
<g id="edge6" class="edge">
<title>1&#45;&gt;4</title>
<path fill="none" stroke="#000000" d="M1714.4057,-1253.2651C1714.4057,-1309.6941 1714.4057,-1376.3744 1714.4057,-1435.8573"/>
<polygon fill="none" stroke="#000000" points="1703.9058,-1436.2145 1714.4057,-1466.2145 1724.9058,-1436.2146 1703.9058,-1436.2145"/>
</g>
<!-- 2struct0 -->
<g id="node4" class="node">
<title>2struct0</title>
<polygon fill="#f2f2f2" stroke="#000000" points="0,-1039.9 0,-1207.1 126.8114,-1207.1 126.8114,-1039.9 0,-1039.9"/>
<text text-anchor="middle" x="63.4057" y="-1190.5" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;struct&gt;&gt;</text>
<text text-anchor="middle" x="63.4057" y="-1173.7" font-family="Times,serif" font-size="14.00" fill="#000000">PaymentInput</text>
<polyline fill="none" stroke="#000000" points="0,-1165.5 126.8114,-1165.5 "/>
<text text-anchor="start" x="8" y="-1148.9" font-family="Times,serif" font-size="14.00" fill="#000000">paymentId: bytes32</text>
<text text-anchor="start" x="8" y="-1132.1" font-family="Times,serif" font-size="14.00" fill="#000000">amount: uint256</text>
<text text-anchor="start" x="8" y="-1115.3" font-family="Times,serif" font-size="14.00" fill="#000000">feeBPS: uint16</text>
<text text-anchor="start" x="8" y="-1098.5" font-family="Times,serif" font-size="14.00" fill="#000000">universeId: uint256</text>
<text text-anchor="start" x="8" y="-1081.7" font-family="Times,serif" font-size="14.00" fill="#000000">deadline: uint256</text>
<text text-anchor="start" x="8" y="-1064.9" font-family="Times,serif" font-size="14.00" fill="#000000">buyer: address</text>
<text text-anchor="start" x="8" y="-1048.1" font-family="Times,serif" font-size="14.00" fill="#000000">seller: address</text>
</g>
<!-- 2struct0&#45;&gt;2 -->
<g id="edge1" class="edge">
<title>2struct0&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M66.2845,-1207.3891C72.3246,-1273.3711 89.4203,-1364.7464 136.4057,-1430 165.1387,-1469.9045 206.7062,-1502.291 248.5197,-1527.5099"/>
<polygon fill="#000000" stroke="#000000" points="248.5213,-1527.5109 255.7213,-1527.1101 258.8605,-1533.602 251.6605,-1534.0028 248.5213,-1527.5109"/>
</g>
<!-- 2struct1 -->
<g id="node5" class="node">
<title>2struct1</title>
<polygon fill="#f2f2f2" stroke="#000000" points="145.2626,-1081.9 145.2626,-1165.1 275.5488,-1165.1 275.5488,-1081.9 145.2626,-1081.9"/>
<text text-anchor="middle" x="210.4057" y="-1148.5" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;struct&gt;&gt;</text>
<text text-anchor="middle" x="210.4057" y="-1131.7" font-family="Times,serif" font-size="14.00" fill="#000000">AssetTransferResult</text>
<polyline fill="none" stroke="#000000" points="145.2626,-1123.5 275.5488,-1123.5 "/>
<text text-anchor="start" x="153.2626" y="-1106.9" font-family="Times,serif" font-size="14.00" fill="#000000">paymentId: bytes32</text>
<text text-anchor="start" x="153.2626" y="-1090.1" font-family="Times,serif" font-size="14.00" fill="#000000">wasSuccessful: bool</text>
</g>
<!-- 2struct1&#45;&gt;2 -->
<g id="edge2" class="edge">
<title>2struct1&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M215.3242,-1165.3172C223.5813,-1225.9148 243.5078,-1340.6562 284.4057,-1430 299.4625,-1462.8925 321.4065,-1495.9365 342.3616,-1523.7919"/>
<polygon fill="#000000" stroke="#000000" points="342.4328,-1523.8851 349.2543,-1526.2234 349.7195,-1533.4195 342.898,-1531.0812 342.4328,-1523.8851"/>
</g>
<!-- 3 -->
<g id="node6" class="node">
<title>3</title>
<polygon fill="#f2f2f2" stroke="#000000" points="293.8327,-817.5 293.8327,-1429.5 896.9787,-1429.5 896.9787,-817.5 293.8327,-817.5"/>
<text text-anchor="middle" x="595.4057" y="-1412.9" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;Interface&gt;&gt;</text>
<text text-anchor="middle" x="595.4057" y="-1396.1" font-family="Times,serif" font-size="14.00" fill="#000000">IPaymentsERC20</text>
<polyline fill="none" stroke="#000000" points="293.8327,-1387.9 896.9787,-1387.9 "/>
<text text-anchor="middle" x="595.4057" y="-1371.3" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
<polyline fill="none" stroke="#000000" points="293.8327,-1363.1 896.9787,-1363.1 "/>
<text text-anchor="start" x="301.8327" y="-1346.5" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="301.8327" y="-1329.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;registerAsSeller()</text>
<text text-anchor="start" x="301.8327" y="-1312.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;relayedPay(inp: PaymentInput, buyerSignature: bytes)</text>
<text text-anchor="start" x="301.8327" y="-1296.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;pay(inp: PaymentInput, operatorSignature: bytes)</text>
<text text-anchor="start" x="301.8327" y="-1279.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;finalize(result: AssetTransferResult, operatorSignature: bytes)</text>
<text text-anchor="start" x="301.8327" y="-1262.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;finalizeAndWithdraw(result: AssetTransferResult, operatorSignature: bytes)</text>
<text text-anchor="start" x="301.8327" y="-1245.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;refund(paymentId: bytes32)</text>
<text text-anchor="start" x="301.8327" y="-1228.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;refundAndWithdraw(paymentId: bytes32)</text>
<text text-anchor="start" x="301.8327" y="-1212.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;withdraw()</text>
<text text-anchor="start" x="301.8327" y="-1195.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;isSellerRegistrationRequired(): bool</text>
<text text-anchor="start" x="301.8327" y="-1178.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;isRegisteredSeller(addr: address): bool</text>
<text text-anchor="start" x="301.8327" y="-1161.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;erc20(): address</text>
<text text-anchor="start" x="301.8327" y="-1144.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;balanceOf(addr: address): uint256</text>
<text text-anchor="start" x="301.8327" y="-1128.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;erc20BalanceOf(addr: address): uint256</text>
<text text-anchor="start" x="301.8327" y="-1111.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;allowance(buyer: address): uint256</text>
<text text-anchor="start" x="301.8327" y="-1094.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;paymentInfo(paymentId: bytes32): Payment</text>
<text text-anchor="start" x="301.8327" y="-1077.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;paymentState(paymentId: bytes32): States</text>
<text text-anchor="start" x="301.8327" y="-1060.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;acceptsRefunds(paymentId: bytes32): bool</text>
<text text-anchor="start" x="301.8327" y="-1044.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;paymentWindow(): uint256</text>
<text text-anchor="start" x="301.8327" y="-1027.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;acceptedCurrency(): string</text>
<text text-anchor="start" x="301.8327" y="-1010.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;enoughFundsAvailable(buyer: address, amount: uint256): bool</text>
<text text-anchor="start" x="301.8327" y="-993.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;maxFundsAvailable(buyer: address): uint256</text>
<text text-anchor="start" x="301.8327" y="-976.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;splitFundingSources(buyer: address, amount: uint256): (externalFunds: uint256, localFunds: uint256)</text>
<text text-anchor="start" x="301.8327" y="-960.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;checkPaymentInputs(inp: PaymentInput)</text>
<text text-anchor="start" x="301.8327" y="-943.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;computeFeeAmount(amount: uint256, feeBPS: uint256): uint256</text>
<text text-anchor="start" x="301.8327" y="-926.5" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="301.8327" y="-909.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; PaymentWindow(window: uint256)</text>
<text text-anchor="start" x="301.8327" y="-892.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; NewSeller(seller: address)</text>
<text text-anchor="start" x="301.8327" y="-876.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; BuyerRefunded(paymentId: bytes32, buyer: address)</text>
<text text-anchor="start" x="301.8327" y="-859.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; Payin(paymentId: bytes32, buyer: address, seller: address)</text>
<text text-anchor="start" x="301.8327" y="-842.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; Paid(paymentId: bytes32)</text>
<text text-anchor="start" x="301.8327" y="-825.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; Withdraw(user: address, amount: uint256)</text>
</g>
<!-- 3&#45;&gt;2 -->
<g id="edge7" class="edge">
<title>3&#45;&gt;2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M470.9627,-1429.8113C459.9525,-1456.9123 449.4911,-1482.6628 440.2332,-1505.4506"/>
<polygon fill="none" stroke="#000000" points="430.3751,-1501.8194 428.8112,-1533.5653 449.8308,-1509.7235 430.3751,-1501.8194"/>
</g>
<!-- 3struct0 -->
<g id="node7" class="node">
<title>3struct0</title>
<polygon fill="#f2f2f2" stroke="#000000" points="439.1648,-298.5 439.1648,-482.5 591.6466,-482.5 591.6466,-298.5 439.1648,-298.5"/>
<text text-anchor="middle" x="515.4057" y="-465.9" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;struct&gt;&gt;</text>
<text text-anchor="middle" x="515.4057" y="-449.1" font-family="Times,serif" font-size="14.00" fill="#000000">Payment</text>
<polyline fill="none" stroke="#000000" points="439.1648,-440.9 591.6466,-440.9 "/>
<text text-anchor="start" x="447.1648" y="-424.3" font-family="Times,serif" font-size="14.00" fill="#000000">state: States</text>
<text text-anchor="start" x="447.1648" y="-407.5" font-family="Times,serif" font-size="14.00" fill="#000000">buyer: address</text>
<text text-anchor="start" x="447.1648" y="-390.7" font-family="Times,serif" font-size="14.00" fill="#000000">seller: address</text>
<text text-anchor="start" x="447.1648" y="-373.9" font-family="Times,serif" font-size="14.00" fill="#000000">operator: address</text>
<text text-anchor="start" x="447.1648" y="-357.1" font-family="Times,serif" font-size="14.00" fill="#000000">feesCollector: address</text>
<text text-anchor="start" x="447.1648" y="-340.3" font-family="Times,serif" font-size="14.00" fill="#000000">expirationTime: uint256</text>
<text text-anchor="start" x="447.1648" y="-323.5" font-family="Times,serif" font-size="14.00" fill="#000000">feeBPS: uint16</text>
<text text-anchor="start" x="447.1648" y="-306.7" font-family="Times,serif" font-size="14.00" fill="#000000">amount: uint256</text>
</g>
<!-- 3struct0&#45;&gt;3 -->
<g id="edge3" class="edge">
<title>3struct0&#45;&gt;3</title>
<path fill="none" stroke="#000000" d="M525.4568,-482.5928C534.3522,-564.0972 547.8714,-687.9665 560.6611,-805.1524"/>
<polygon fill="#000000" stroke="#000000" points="560.674,-805.2713 565.3014,-810.8018 561.976,-817.2004 557.3486,-811.6699 560.674,-805.2713"/>
</g>
<!-- 3enum0 -->
<g id="node8" class="node">
<title>3enum0</title>
<polygon fill="#f2f2f2" stroke="#000000" points="609.6802,-332.1 609.6802,-448.9 741.1312,-448.9 741.1312,-332.1 609.6802,-332.1"/>
<text text-anchor="middle" x="675.4057" y="-432.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;enum&gt;&gt;</text>
<text text-anchor="middle" x="675.4057" y="-415.5" font-family="Times,serif" font-size="14.00" fill="#000000">States</text>
<polyline fill="none" stroke="#000000" points="609.6802,-407.3 741.1312,-407.3 "/>
<text text-anchor="start" x="617.6802" y="-390.7" font-family="Times,serif" font-size="14.00" fill="#000000">NotStarted: 0</text>
<text text-anchor="start" x="617.6802" y="-373.9" font-family="Times,serif" font-size="14.00" fill="#000000">AssetTransferring: 1</text>
<text text-anchor="start" x="617.6802" y="-357.1" font-family="Times,serif" font-size="14.00" fill="#000000">Refunded: 2</text>
<text text-anchor="start" x="617.6802" y="-340.3" font-family="Times,serif" font-size="14.00" fill="#000000">Paid: 3</text>
</g>
<!-- 3enum0&#45;&gt;3 -->
<g id="edge4" class="edge">
<title>3enum0&#45;&gt;3</title>
<path fill="none" stroke="#000000" d="M669.0278,-448.9373C660.5298,-526.8009 644.851,-670.4573 630.1395,-805.2519"/>
<polygon fill="#000000" stroke="#000000" points="630.1123,-805.5012 633.4377,-811.8998 628.8103,-817.4304 625.4849,-811.0318 630.1123,-805.5012"/>
</g>
<!-- 5 -->
<g id="node10" class="node">
<title>5</title>
<polygon fill="#f2f2f2" stroke="#000000" points="887.5827,-.5 887.5827,-780.5 1487.2287,-780.5 1487.2287,-.5 887.5827,-.5"/>
<text text-anchor="middle" x="1187.4057" y="-763.9" font-family="Times,serif" font-size="14.00" fill="#000000">PaymentsERC20</text>
<polyline fill="none" stroke="#000000" points="887.5827,-755.7 1487.2287,-755.7 "/>
<text text-anchor="start" x="895.5827" y="-739.1" font-family="Times,serif" font-size="14.00" fill="#000000">Private:</text>
<text text-anchor="start" x="895.5827" y="-722.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_erc20: address</text>
<text text-anchor="start" x="895.5827" y="-705.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_acceptedCurrency: string</text>
<text text-anchor="start" x="895.5827" y="-688.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_paymentWindow: uint256</text>
<text text-anchor="start" x="895.5827" y="-671.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_isSellerRegistrationRequired: bool</text>
<text text-anchor="start" x="895.5827" y="-655.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_isRegisteredSeller: mapping(address=&gt;bool)</text>
<text text-anchor="start" x="895.5827" y="-638.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_payments: mapping(bytes32=&gt;Payment)</text>
<text text-anchor="start" x="895.5827" y="-621.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_balanceOf: mapping(address=&gt;uint256)</text>
<polyline fill="none" stroke="#000000" points="887.5827,-613.3 1487.2287,-613.3 "/>
<text text-anchor="start" x="895.5827" y="-596.7" font-family="Times,serif" font-size="14.00" fill="#000000">Private:</text>
<text text-anchor="start" x="895.5827" y="-579.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_refund(paymentId: bytes32)</text>
<text text-anchor="start" x="895.5827" y="-563.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_finalize(result: AssetTransferResult, operatorSignature: bytes)</text>
<text text-anchor="start" x="895.5827" y="-546.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_finalizeSuccess(paymentId: bytes32, p: Payment)</text>
<text text-anchor="start" x="895.5827" y="-529.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_finalizeFailed(paymentId: bytes32)</text>
<text text-anchor="start" x="895.5827" y="-512.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_refundToLocalBalance(paymentId: bytes32)</text>
<text text-anchor="start" x="895.5827" y="-495.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_withdraw()</text>
<text text-anchor="start" x="895.5827" y="-479.1" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="895.5827" y="-462.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setPaymentWindow(window: uint256)</text>
<text text-anchor="start" x="895.5827" y="-445.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setIsSellerRegistrationRequired(isRequired: bool)</text>
<text text-anchor="start" x="895.5827" y="-428.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;registerAsSeller()</text>
<text text-anchor="start" x="895.5827" y="-411.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;relayedPay(inp: PaymentInput, buyerSignature: bytes)</text>
<text text-anchor="start" x="895.5827" y="-395.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;pay(inp: PaymentInput, operatorSignature: bytes)</text>
<text text-anchor="start" x="895.5827" y="-378.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;finalize(result: AssetTransferResult, operatorSignature: bytes)</text>
<text text-anchor="start" x="895.5827" y="-361.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;finalizeAndWithdraw(result: AssetTransferResult, operatorSignature: bytes)</text>
<text text-anchor="start" x="895.5827" y="-344.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refundAndWithdraw(paymentId: bytes32)</text>
<text text-anchor="start" x="895.5827" y="-327.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;withdraw()</text>
<text text-anchor="start" x="895.5827" y="-311.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isSellerRegistrationRequired(): bool</text>
<text text-anchor="start" x="895.5827" y="-294.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isRegisteredSeller(addr: address): bool</text>
<text text-anchor="start" x="895.5827" y="-277.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;erc20(): address</text>
<text text-anchor="start" x="895.5827" y="-260.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;balanceOf(addr: address): uint256</text>
<text text-anchor="start" x="895.5827" y="-243.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;erc20BalanceOf(addr: address): uint256</text>
<text text-anchor="start" x="895.5827" y="-227.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;paymentInfo(paymentId: bytes32): Payment</text>
<text text-anchor="start" x="895.5827" y="-210.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;paymentWindow(): uint256</text>
<text text-anchor="start" x="895.5827" y="-193.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;acceptedCurrency(): string</text>
<text text-anchor="start" x="895.5827" y="-176.7" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="895.5827" y="-159.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor(erc20Address: address, currencyDescriptor: string)</text>
<text text-anchor="start" x="895.5827" y="-143.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refund(paymentId: bytes32)</text>
<text text-anchor="start" x="895.5827" y="-126.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;allowance(buyer: address): uint256</text>
<text text-anchor="start" x="895.5827" y="-109.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;paymentState(paymentId: bytes32): States</text>
<text text-anchor="start" x="895.5827" y="-92.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;acceptsRefunds(paymentId: bytes32): bool</text>
<text text-anchor="start" x="895.5827" y="-75.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;enoughFundsAvailable(buyer: address, amount: uint256): bool</text>
<text text-anchor="start" x="895.5827" y="-59.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;maxFundsAvailable(buyer: address): uint256</text>
<text text-anchor="start" x="895.5827" y="-42.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;splitFundingSources(buyer: address, amount: uint256): (externalFunds: uint256, localFunds: uint256)</text>
<text text-anchor="start" x="895.5827" y="-25.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;checkPaymentInputs(inp: PaymentInput)</text>
<text text-anchor="start" x="895.5827" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;computeFeeAmount(amount: uint256, feeBPS: uint256): uint256</text>
</g>
<!-- 5&#45;&gt;0 -->
<g id="edge10" class="edge">
<title>5&#45;&gt;0</title>
<path fill="none" stroke="#000000" d="M1187.4057,-780.6075C1187.4057,-866.4515 1187.4057,-950.5611 1187.4057,-1013.9934"/>
<polygon fill="none" stroke="#000000" points="1176.9058,-1014.282 1187.4057,-1044.282 1197.9058,-1014.2821 1176.9058,-1014.282"/>
</g>
<!-- 5&#45;&gt;1 -->
<g id="edge9" class="edge">
<title>5&#45;&gt;1</title>
<path fill="none" stroke="#000000" d="M1467.8786,-780.6075C1515.9489,-847.4681 1563.2628,-913.2766 1603.3854,-969.0828"/>
<polygon fill="none" stroke="#000000" points="1594.9594,-975.3503 1620.9972,-993.5789 1612.01,-963.0915 1594.9594,-975.3503"/>
</g>
<!-- 5&#45;&gt;3 -->
<g id="edge8" class="edge">
<title>5&#45;&gt;3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M887.5035,-761.8317C878.8077,-772.5985 870.1165,-783.3597 861.4598,-794.0783"/>
<polygon fill="none" stroke="#000000" points="853.2563,-787.5243 842.5754,-817.4604 869.5935,-800.7189 853.2563,-787.5243"/>
</g>
</g>
</svg>
